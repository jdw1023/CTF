<!DOCTYPE html>
<html>

<head>
	<title>Unofficial CTFTime Calculator</title>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js'
		integrity='sha512-n/4gHW3atM3QqRcbCn6ewmpxcLAHGaDjpEBu4xZd47N0W2oQ+6q7oc3PXstrJYXcbNU1OHdQ1T7pAP+gi5Yu8g=='
		crossorigin='anonymous'></script>
	<link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
</head>

<body>
	<script>
		// get data from form
		function calc(e) {
			e.preventDefault();
			var data = {
				"team_points": parseFloat($("#team_points").val()),
				"best_points": parseFloat($("#best_points").val()),
				"team_place": parseFloat($("#team_place").val()),
				"weight": parseFloat($("#weight").val()),
				"total_teams": parseFloat($("#total_teams").val()),
			};
			let result = 0.0;
			let points_coef = data.team_points/data.best_points;
			let place_coef = 1/data.team_place;
			console.log(points_coef);
			if (points_coef > 0) {
				result = (points_coef + place_coef) * data.weight / (1/(1+(data.team_place/data.total_teams)));
			};
			$("#result").html(result.toFixed(6));
			return false;
		};
	</script>
	<article>
		<form id="calc" onsubmit="calc(event)">
			<div class="form-group">
				<label for="team_points">Team points</label>
				<input type="number" id="team_points" placeholder="Team points" step="any" required>
			</div>
			<div class="form-group">
				<label for="best_points">Best points</label>
				<input type="number" id="best_points" placeholder="Points of the 1st team" step="any" required>
			</div>
			<div class="form-group">
				<label for="team_place">Team place</label>
				<input type="number" id="team_place" placeholder="Team place" step="any" required>
			</div>
			<div class="form-group">
				<label for="weight">Weight</label>
				<input type="number" id="weight" placeholder="CTFTime Weight" step="any" required>
			</div>
			<div class="form-group">
				<label for="total_teams">Total teams</label>
				<input type="number" id="total_teams" step="any" placeholder="Total # of teams that have point of > 0" required>
			</div>
			<div class="form-group">
				<button type="submit">Calculate</button>
			</div>
		</form>
	</article>
	<article>
		<div id="result"></div>
	</article>
</body>

</html>